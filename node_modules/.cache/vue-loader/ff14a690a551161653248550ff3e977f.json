{"remainingRequest":"/Users/mohamad/Desktop/dev/moarefe_signup/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mohamad/Desktop/dev/moarefe_signup/src/components/Form.vue?vue&type=style&index=0&id=e8ac67b6&scoped=true&lang=css&","dependencies":[{"path":"/Users/mohamad/Desktop/dev/moarefe_signup/src/components/Form.vue","mtime":1562670108146},{"path":"/Users/mohamad/Desktop/dev/moarefe_signup/node_modules/css-loader/index.js","mtime":1562660943602},{"path":"/Users/mohamad/Desktop/dev/moarefe_signup/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1562660949196},{"path":"/Users/mohamad/Desktop/dev/moarefe_signup/node_modules/postcss-loader/src/index.js","mtime":1562660946304},{"path":"/Users/mohamad/Desktop/dev/moarefe_signup/node_modules/cache-loader/dist/cjs.js","mtime":1562660942197},{"path":"/Users/mohamad/Desktop/dev/moarefe_signup/node_modules/vue-loader/lib/index.js","mtime":1562660949196}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#aida-container {\n  /* background-color: red; */\n  width: 100%;\n}\n#aida {\n  /* background-color: #212121; */\n  background-color: transparent;\n  border: 4px solid\t#4B0082;\n  border-radius: 18px;\n  vertical-align: middle;\n  margin: 30px auto 0 auto;\n  width: 27%;\n  min-width: 320px;\n}\n.form-group, .form-control {\n  width: 90%;\n  margin: auto;\n}\n",{"version":3,"sources":["Form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Form.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div id=\"aida-container\">\n  <div id=\"aida\" class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <form style=\"width:90%; margin:auto;\">\n          <div class=\"text-center\">\n            <h2 style=\"padding: 20px;font-family: 'Raleway', sans-serif;color : #884DCB\">Moarefe Registration</h2>\n          </div>\n          <!-- <div style=\"display:table; font-family: 'PT Sans Narrow', sans-serif;font-size:20px\"> -->\n            <div class=\"form-group\" style=\" font-family: 'PT Sans Narrow', sans-serif;font-size:20px\">\n              <label for=\"nameInput\" style=\"color:white\">Full Name</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"nameInput\"\n                v-model=\"user.name\"\n                placeholder=\"Name\"\n              />\n            <!-- <small\n              id=\"emailHelp\"\n              class=\"form-text text-muted\"\n            >We'll never share your email with anyone else.</small> -->\n            \n            </div>\n          <!-- </div> -->\n          <div class=\"mt-4 col-md-12\">\n          </div>\n          <div class=\"form-group\" style=\" font-family: 'PT Sans Narrow', sans-serif;font-size:20px\">\n            <label for=\"emailInput\" style=\"color:white\">Email</label>\n            <input\n              type=\"email\"\n              class=\"form-control\"\n              v-model=\"user.email\"\n              id=\"emailInput\"\n              placeholder=\"Enter Your Email\"\n            />\n          </div>\n\n          <div class=\"mt-4 col-md-12\">\n          </div>\n\n          <div class=\"form-group\" style=\" font-family: 'PT Sans Narrow', sans-serif;font-size:20px\">\n            <label for=\"phoneNumberInput\" style=\"color:white\">Phone Number</label>\n            <input \n              type=\"tel\"\n              class=\"form-control\"\n              v-model=\"user.phone_number\"\n              id=\"phoneNumberInput\"\n              placeholder=\"Enter Your Number\"\n            />\n          </div>\n          <div class=\"mt-4 col-md-12\">\n          </div>\n          <div class=\"form-group\" style=\" font-family: 'PT Sans Narrow', sans-serif;font-size:20px\">\n            <label for=\"stdNumInput\" style=\"color:white\">Student Number</label>\n            <input \n              type=\"text\"\n              class=\"form-control\"\n              v-model=\"user.student_number\"\n              id=\"stdNumInput\"\n              placeholder=\"Enter Your Student Number\"\n            /> </div>\n\n            <div class=\"float-center\"><h2>groups:</h2></div>\n          \n          \n          <!-- <div class=\"mt-4 col-md-12\">\n          </div>\n          <div class=\"form-group\" style=\" font-family: 'PT Sans Narrow', sans-serif;font-size:20px\">\n            <label for=\"addressInput\" style=\"color:white\">Address</label>\n            <input \n              type=\"text\"\n              class=\"form-control\"\n              v-model=\"user.address\"\n              id=\"addressInput\"\n              placeholder=\"Enter Your Address\"\n            />\n          </div> -->\n\n          <div class=\"form-group\" v-bind:key=\"parent.pk\" v-for=\"parent in parents\" style=\" font-family: 'PT Sans Narrow', sans-serif;font-size:20px; color:white\">\n            <input\n              class=\"form-group-input\"\n              :id=\"'parent' + parent.pk\"\n              @change=\"parentCheckboxChanged\"\n              type=\"checkbox\"\n              :value= \"parent.pk\"\n            />\n            <label class=\"form-group-label\" :for=\"'parent' + parent.pk\">{{ parent.name }}</label>\n          </div>\n\n          <div class=\"form-group\" style=\" font-family: 'PT Sans Narrow', sans-serif;font-size:20px;color:white\">\n            <h2>Categories</h2>\n          </div>          \n\n          <div class=\"form-group\" v-bind:key=\"parent.pk\" v-for=\"parent in chosenParents \" style=\" font-family: 'PT Sans Narrow', sans-serif;font-size:20px;color:white\">\n            <div\n              class=\"form-group\"\n              v-bind:key=\"category.pk\"\n              v-for=\"category in categories\"\n              v-if=\"category.parent.pk == Number(parent)\"\n              \n            >\n              <input\n                class=\"form-group-input\"\n                :id=\"'category' + category.pk\"\n                @change=\"categoryCheckboxChanged\"\n                type=\"checkbox\"\n                :value=\"category.pk\"\n              />\n              <label class=\"form-group-label\" :for=\"'category' + category.pk\"> <span style=\"color:red\">{{ category.parent.name }}</span> {{ category.name }}</label>\n            </div>\n          </div>\n\n          <div class=\"form-group\" style=\" font-family: 'PT Sans Narrow', sans-serif;font-size:20px;color:white\">\n            <h2>Questions</h2>\n          </div>\n\n          <div class=\"form-group\" v-bind:key=\"category.pk\" v-for=\"category in chosenCategories\">\n            <div class=\"form-group\" v-bind:key=\"question\" v-for=\"question in questions\">\n              <div class=\"form-group\" v-if=\"question.category.pk == category\">\n                <div class=\"form-group\" v-if=\"question.is_bool == false\">\n                    <p> {{ question.category.name }} {{ question.text }} </p>\n                    <input\n                      v-model=\"info[question.pk]\"\n                      class=\"form-control\"\n                      type=\"text\"\n                      placeholder=\"answer\"\n                      > \n                </div>\n                <div class=\"form-group  \" v-else>\n                  <p> {{ question.category.name }} {{ question.text }} </p>\n                  <label><input\n                      v-model=\"info[question.pk]\"\n                      :name=\"question.pk\"\n                      class=\"radio\"\n                      type=\"radio\"\n                      label=\"yes\"\n                      placeholder=\"answer\"\n                      value= true\n                      padding=\"20px\"\n                      > yes </label>\n                      <div></div>\n                      <label><input\n                      v-model=\"info[question.pk]\"\n                      :name=\"question.pk\"\n                      class=\"radio\"\n                      type=\"radio\"\n                      label=\"no\"\n                      value= false\n                      placeholder=\"answer\"\n                      padding=\"20px\"\n                      > no </label>\n\n                </div>\n              </div>\n            </div>\n          </div>\n\n\n\n          <p @click=\"doRegister\" class=\"btn btn-primary\" style=\" font-family: 'PT Sans Narrow', sans-serif;font-size:20px;color:white\">Submit</p>\n        </form>\n      </div>\n    </div>\n  </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"Form\",\n  data() {\n    return {\n      user: {\n        name: \"\",\n        email: \"\",\n        phone_number: \"\",\n        student_number: null,\n        address: \"\"\n      },\n      userpk: null,\n      parents: [],\n      chosenParents: [],\n      categories: [],\n      chosenCategories: [],\n      questions: [],\n      chosenQuestions: [],\n      dataObject: {},\n      info: {},\n      parentsMap : {},\n      categoriesMap : {},\n      questionsMap: {}\n    };\n  },\n  methods: {\n    async doRegister() {\n      const vinst = this;\n      \n      // console.log(this.user);\n\n      async function createuser(a) { \n        // console.log('1');\n        let response = await axios.post(\"http://localhost:8000/signup/user/\", a.user)\n        \n        // console.log('2');\n        if (response.status == 200) {\n          // console.log('success: ',response);\n          var upk = response.data[\"pk\"];\n          // console.log(a.userpk);\n        } else {\n          console.log('error: ',response);\n        }\n\n        return upk;\n      \n        }\n\n        this.userpk = await createuser(this)\n        // .then((res)=>{\n        //     // console.log(res);\n        //     this.userpk = res;\n            // console.log(this.userpk);\n            // console.log(this.userpk);\n        // });\n        // console.log(\"info:\");\n        // console.log(this.info);\n        // console.log(this.userpk);\n        \n        var answerData = {};\n\n        var answerlist=[];\n\n\n        for (var item in this.info) {\n            if (this.questionsMap[item].is_bool == true) {\n              // console.log('tushe');\n              answerData = {\n                \"user\": this.userpk,\n                \"question\": item,\n                \"text\": \"\",\n                \"boolean\": this.info[item]\n              }\n              answerlist.push(answerData);\n              // console.log(answerData);\n            } else {\n              // console.log('biruneshe');\n              answerData = {\n                \"user\": this.userpk,\n                \"question\": item,\n                \"text\": this.info[item],\n                \"boolean\": null,\n              }\n              answerlist.push(answerData);\n              // console.log(answerData);\n            }\n        }\n        console.log(answerlist);\n        var answerres= await axios.post('http://localhost:8000/signup/answer/', answerlist);\n        console.log(answerres);\n\n        answerlist = [];\n        this.info = [];\n        this.chosenQuestions=[];\n        this.chosenCategories = [];\n        this.chosenParents=[];\n        \n    },\n    parentCheckboxChanged($event) {\n      // console.log(this.parentsMap[$event.target.value])\n      if ($event.target.checked) {\n        // console.log($event.target.value)\n        this.chosenParents.push($event.target.value);\n        \n        // console.log(this.chosenParents);\n      } else {\n        let index = this.chosenParents.indexOf($event.target.value);\n        if (index > -1) {\n          this.chosenParents.splice(index, 1);\n        }\n          let temp = this.chosenCategories.slice(0);\n          // console.log('set');\n          // console.log('temp:',temp);\n          // console.log('cC:', this.chosenCategories);\n          for (var cat in temp) {\n            // console.log('cC list:', this.chosenCategories);\n            // console.log('temp list :', temp);\n            // console.log('temp[cat]: ',temp[cat]);\n            // console.log('temp[cat] obj: ',this.categoriesMap[temp[cat]]);\n            // console.log('cC[cat]: ', this.chosenCategories[cat]);\n            // console.log('cC[cat] obj: ', this.categoriesMap[this.chosenCategories[cat]]);\n            // console.log(this.categoriesMap[temp[cat]].parent.pk == $event.target.value);\n            //   console.log(this.categoriesMap[this.chosenCategories[cat]].parent.pk == $event.target.value);\n              // console.log('catlist:');\n              // console.log('cC: ',this.categoriesMap[this.chosenCategories[temp[cat]]]);\n              // console.log('cat:');\n              // console.log(this.chosenCategories[cat]);\n              // console.log('value:');\n              // console.log($event.target.value);\n              \n            if (this.categoriesMap[temp[cat]].parent.pk == $event.target.value) {\n              // console.log('sag in if');\n              // console.log('value: ',$event.target.value);\n              var indexx = this.chosenCategories.indexOf(temp[cat]);\n              // console.log('index: ',indexx);\n              if (indexx > -1) {\n                this.chosenCategories.splice(indexx, 1);\n          //       // console.log(this.chosenCategories);\n              }\n          }\n      }\n      temp = [];\n    }\n    \n    \n\n  },\n  categoryCheckboxChanged($event) {\n      if ($event.target.checked) {\n        this.chosenCategories.push($event.target.value);\n        // console.log(this.chosenCategories);\n      } else {\n        let index = this.chosenCategories.indexOf($event.target.value);\n        if (index > -1) {\n          this.chosenCategories.splice(index, 1);\n        }\n\n      }\n    }\n    },\n  mounted() {\n    axios.get(\"http://localhost:8000/signup/parent\").then(response => {\n      // console.log(response.data);\n      this.parents = response.data;\n      for(let item of this.parents){\n        this.parentsMap[item.pk] = item;\n      }\n      \n    }),\n      axios.get(\"http://localhost:8000/signup/category\").then(response => {\n        // console.log(response.data);\n        this.categories = response.data;\n        for(let item of this.categories){\n        this.categoriesMap[item.pk] = item;\n      }\n      }),\n      axios.get(\"http://localhost:8000/signup/question\").then(response => {\n        // console.log(response.data);\n        this.questions = response.data;\n        for(let item of this.questions){\n        this.questionsMap[item.pk] = item;}\n      });\n  }\n};\n</script>\n\n\n<style scoped>\n#aida-container {\n  /* background-color: red; */\n  width: 100%;\n}\n#aida {\n  /* background-color: #212121; */\n  background-color: transparent;\n  border: 4px solid\t#4B0082;\n  border-radius: 18px;\n  vertical-align: middle;\n  margin: 30px auto 0 auto;\n  width: 27%;\n  min-width: 320px;\n}\n.form-group, .form-control {\n  width: 90%;\n  margin: auto;\n}\n</style>\n\n\n\n\n\n\n\n\n// <div class=\"form-check\" v-bind:key=\"category.pk\" v-for=\"category in chosenCategories\">\n//             <div\n//               class=\"form-check\"\n//               v-bind:key=\"question.pk\"\n//               v-if=\"question.category == Number(category)\"\n              \n\n//               v-for=\"question in questions\"\n//             >\n//               <input\n//                 class=\"form-check-input\"\n//                 :id=\"'question' + question.pk\"\n//                 type=\"checkbox\"\n//                 :value=\"question.pk\"\n//               />\n//               <!-- TODO -->\n//               <label class=\"form-check-label\" :for=\"'question' + question.pk\"> {{ question.text }}</label>\n//             </div>\n//           </div>"]}]}